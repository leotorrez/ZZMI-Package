namespace = ZZMI

[Include SlotFix]
include = SlotFix.ini

[CommandListSetTextures]
run = CommandListSetFromAliasUnlessNull
if DRAW_TYPE == 2 || DRAW_TYPE == 4
	run = CommandList\SlotsFix\RunUnlessNull
endif
run = CommandListClearMain

[CommandListSetTex]
run = CommandListSetFromAliasUnlessNull
if DRAW_TYPE == 2 || DRAW_TYPE == 4
	run = CommandList\SlotsFix\RunUnlessNull
endif
run = CommandListClearMain

[ResourceDiffuse]
[ResourceNormalMap]
[ResourceLightMap]
[ResourceMaterialMap]

[ResourceD]
[ResourceN]
[ResourceL]
[ResourceM]

[CommandListSetFromAliasUnlessNull]
ResourceDiffuse = ref ResourceD unless_null
ResourceNormalMap = ref ResourceN unless_null
ResourceLightMap = ref ResourceL unless_null
ResourceMaterialMap = ref ResourceM unless_null
run = CommandListClearAliases

[CommandListClearMain]
ResourceDiffuse = null
ResourceNormalMap = null
ResourceLightMap = null
ResourceMaterialMap = null

[CommandListClearAliases]
ResourceD = null
ResourceN = null
ResourceL = null
ResourceM = null

[CommandListClearResources]
run = CommandListClearMain
run = CommandListClearAliases